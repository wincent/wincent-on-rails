// basic appearance

body
  background:       #ddd
  margin:           0px
  padding:          0px
  font-family:      "Lucida Grande", Geneva, Arial, Verdana, sans-serif
  font-size:        75%

h1, h2, h3, h4, h5, h6
  color:            #333333

h1.major
  border-bottom:      2px solid #ccc
  a:hover
    text-decoration:  none
    color:            #ee7714
h2.major
  border-bottom:      1px solid #ccc
  a:hover
    text-decoration:  none
    color:            #ee7714

p, li
  color:            #666

pre
  font-family:      Consolas, Monaco, Courier
  color:            black
  background-color: #ffffb6
  border:           1px solid silver
  padding:          1em
  padding-top:      0em
  padding-bottom:   1px
  margin-left:      1em
  margin-right:     2em
  font-size:        110%
  line-height:      18px
  overflow:         auto

pre span.line-number
  counter-increment:  line-number
  text-align:         right
  float:              left
  margin-left:        -1.5em
  margin-right:       0.5em
  padding-right:      0.5em
  border-right:       1px solid silver
  width:              3em
  color:              silver
  background:         #fee

pre span.line-number:before
  content:            counter(line-number)

// these based on Vim colorscheme because that's what I'm used to looking at
pre
  span.boolean-syntax
    color: #cd0000
  span.comment-syntax
    color: #00e
  span.constant-syntax
    color: #1a8b0a
  span.identifier-syntax
    color: #458b73
  span.keyword-syntax
    color: #1673cc
  span.numeric-literal-syntax
    color: #fc8a0b
  span.preprocessor-syntax
    color: #1673cc
  span.statement-syntax
    color: #b02f5f
  span.string-literal-syntax
    color: #0068ab
  span.symbol-syntax
    color: #fc8a0b

// for the benefit of Safari (Firefox is fine):
// for super-wide pre spans inside tables Safari will grow the table as large as need be to avoid adding scrollbars to the pre
// block; this has the unwanted side-effect of adding scrollbars to the window and making the rest of the text horribly
// inconvenient to read
table pre
  max-width:        640px

code, tt
  color:            #600
  font-family:      Consolas, Monaco, Courier
  font-size:        14px
  padding:
    left:           0.1em
    right:          0.1em

// blockquote.png: 32 x 32
blockquote
  padding-left:     24px
  padding-right:    24px
  min-height:       32px
  background:       url(../images/blockquote.png) no-repeat left top
  margin:
    left:           1em
    right:          2em
  p, li
    color:          #999

// links

a
  color:              #2971a7
  font-weight:        bold
  text-decoration:    none
  &:hover
    text-decoration:  underline
  &:visited
    font-weight:      normal
  img
    // for Firefox:
    border:           none

// IE6/7 doesn't support the :after pseudo selector
a.external:after
  content:            url(../images/external.png)

a.mailto:after
  content:            url(../images/mailto.png)

// overall page layout

#header
  h1
    font-size:        medium
    margin-top:       -1em
    margin-bottom:    -1em
    padding-top:      1em
    padding-left:     1em
    height:           54px
    a
      font-weight:    bold
    img
      vertical-align: middle
  #meta
    background:       url(../images/header-bg.png) left bottom repeat-x
    a
      color:          white

#header-shadow
  height:             20px
  background:         url(../images/header-shadow.png) top repeat-x

#navbar
  font-size:          0.9em
  font-weight:        bold
  background:         #83837d url(../images/navbar-bg.png) left top repeat-x
  height:             11px
  margin:             0em
  padding:
    top:              1em
    bottom:           1em
  li.selected > a
    background:       url(../images/navbar-selected.png) left top repeat-x
    color:            white
    text-decoration:  underline
  > li
    float: left
    list-style-type: none
  >li#login
    margin-right:     1em
    float:            right
  >li#logout
    margin-right:     1em
    float:            right
  li
    > ul
      display:        none
    li
      display:        block
      margin:         0.5em
  > li:hover
    > ul
      display:            block
      border:             1px solid gray
      -webkit-box-shadow: 5px 5px 5px #888
      -moz-box-shadow:    5px 5px 5px #888
      box-shadow:         5px 5px 5px #888
      -webkit-opacity:    .95
      -moz-opacity:       .95
      opacity:            .95
      filter:             alpha(opacity=95)
      background:         white
      padding:            1em
      position:           absolute
      top:                70px
      z-index:            110
    ul
      display: block
      margin-bottom: 1.5em
      li li
        margin-left: -2em
  > li > a
    padding:        1em
    color:          black
    font-weight:    bold
  > li > a:hover
    background:     url(../images/navbar-hover.png) center center repeat-x
    color:          white

#navbar form
  position:         relative
  top:              0px
  left:             0px
  display:          inline
  margin:           0em
  padding:          0em
  input
    margin:         0px
    padding:        0px
    font-size:      0.7em

#breadcrumbs
  margin:           10px 10px 0px 10px
  font-size:        0.9em

#content
  line-height:            18px
  clear:                  both
  padding:
    top:                  0.5em
    bottom:               1em
    left:                 2em
    right:                3em
  margin:
    top:                  1em
    left:                 1em
    right:                1em
  -webkit-border-radius:  1em
  -moz-border-radius:     1em
  background:             #fff

// tighter fit for application layout, standard fit for empty layout
#header-shadow + #content
  margin-top:             -0.5em

#posts
  float: left
  width: 70%
  margin: 0

#sidebar
  margin-left: 73%
  margin-top: 1em
  margin-right: -1em
  padding:
    left: 1.5em
    top: 0.5em
    bottom: 1em
    right: 1.5em
  border-radius: 1em
  -moz-border-radius: 1em
  -webkit-border-radius: 1em
  background: #eeeeee
  border: 2px solid silver
  .hoverlink
    visibility: visible
    display:    none
  .tweet:hover .hoverlink
    display:    inline
  .info
    text-align: right

// hack
.clearboth
  clear: both

#footer
  clear:                both
  text-align:           center
  font-size:            x-small
  margin:               1em
  ul
    li
      list-style-type:  none
      display:          inline
      padding:          5px 10px 5px 10px
    li + li
      border-left:      1px solid silver

div.two-columns
  float:            left
  width:            50%
  margin-bottom:    3em

div.column
  padding-left:     1.5em
  padding-right:    1.5em

// flashes

=flash_icon($color,$url)
  background:
    color:                $color
    image:                $url
    position:             10px center
    repeat:               no-repeat

#cacheable-flash
  ul
    margin: 0em
  li
    color: black

#error, #notice
  border-radius:          3px
  -moz-border-radius:     3px
  -webkit-border-radius:  3px
  font-weight:            bold
  margin:                 1em
  padding:                1em
    left:                 36px

#error
  border:                 1px solid #b77d74
  +flash_icon(#f9b8be, url(../images/exclamation.png))

#notice
  border:                 1px solid #72a384
  +flash_icon(#c3e3b5, url(../images/information.png))

// pseudo-flashes
// just like the real flashes, but class-based rather than id-based so that they can be used multiple times

.error, .notice
  border-radius:          3px
  -moz-border-radius:     3px
  -webkit-border-radius:  3px
  font-weight:            bold
  margin:                 1em
  padding:                1em
    left:                 36px

.error
  border:                 1px solid gray
  +flash_icon(#f9b8be, url(../images/exclamation.png))

.notice
  border:                 1px solid gray
  +flash_icon(#c3e3b5, url(../images/information.png))

// AJAX
.spinner
  padding-left: 0.33em
  margin-bottom: -0.1em
  display: none

// subtle error feedack for failed AJAX requests
.ajax_error
  background:       #f9b8be

// pagination

.pagination
  margin:           1em
  font-size:        x-small
  text-align:       right
  .disabled
    color:          gray
  .first
    padding-left:   18px
    background:     url(../images/first.png) no-repeat left center
  .first.disabled
    background:     url(../images/first-disabled.png) no-repeat left center
  .prev
    padding-left:   18px
    background:     url(../images/previous.png) no-repeat left center
  .prev.disabled
    background:     url(../images/previous-disabled.png) no-repeat left center
  .next
    padding-right:  18px
    background:     url(../images/next.png) no-repeat right center
  .next.disabled
    background:     url(../images/next-disabled.png) no-repeat right center
  .last
    padding-right:  18px
    background:     url(../images/last.png) no-repeat right center
  .last.disabled
    background:     url(../images/last-disabled.png) no-repeat right center

// tables

// tables with header cells on the left
table tbody tr th
  text-align: right

// tables with header cells along the top
table thead tr th
  text-align:       center
  border-bottom:    1px silver solid
  border-right:     1px silver solid

td, th
  padding:  0.5em

th
  background:       #f7f7f7

th.ascending a
  font-weight:      bold
  background:       url(../images/upwards-sort-triangle.png) no-repeat right center
  padding-right:    16px
th.descending a
  font-weight:      bold
  background:       url(../images/downwards-sort-triangle.png) no-repeat right center
  padding-right:    16px

tr.odd
  background:       #f7f7f7
tr.even
  background:       #eaeaea

.annotation
  font:
    size:           x-small
    weight:         normal
  color:            #666

// forms

input.field_with_errors, textarea.field_with_errors
  border:           4px solid #f9b8be

label
  display:          inline-block
  text-align:       right
  color:            black
  font-weight:      bold
  vertical-align:   top
  padding-right:    1em
  width:            20%

li input, li textarea
  width:            70%

form
  li
    display:          block
    list-style:       none
    padding-top:      5px
    padding-bottom:   5px
  li + li
    border-top:       1px solid #eeeeee

// tags

.cloud
  text-align:       center
  a
    padding:        0.5em

.filterbox
  float: right
  max-width: 15em
  margin: 1em
  border:                 1px solid gray
  -webkit-border-radius:  0.33em
  -webkit-box-shadow:     0.33em 0.33em 0.33em #aaa
  -moz-border-radius:     0.33em
  padding: 1em
  h3
    margin-top: 0em
  p
    font-size: xx-small

// general appearance

.when
  font-size:        x-small
  color:            #bbb
  a
    color:          #bbb
    font-weight:    normal

.hoverlink
  visibility:       hidden
  font-size:        x-small
  color:            #bbb
  border-left:      1px solid silver
  padding-left:     6px
  a
    color:          #bbb
    font-weight:    normal

.comment:hover .hoverlink
  visibility:       visible

.tweet:hover .hoverlink
  visibility:       visible

.deleted
  color:            #bbb
  a
    color:          #bbb

.highlight
  background:       #eee

// consider per-controller custom CSS for this kind of class
.post
  margin-top:       3em
  .when
    // we do this rather than special casing the h2 (posts#index)
    // and the h1 (posts#show), because the title varies depending on where it appears
    margin-top:     -1em
  .info
    text-align:     right
    padding:        1em

// pad to left by width of comment-bubble.png (16px) plus 6px more breathing room
.comments_link
  float:            left
  background:       url(../images/comment-bubble.png) no-repeat left center
  padding-left:     22px
  padding-top:      2px
  padding-bottom:   2px
  min-height:       22px

=button
  position:                 relative
  margin:
    right:                  0.25em
  border:
    top:                    0
    right:                  0
    left:                   0
    bottom:                 1px solid rgba(0, 0, 0, 0.25)
  -webkit-border-radius:    5px
  -moz-border-radius:       5px
  border-radius:            5px
  -webkit-box-shadow:       0 1px 3px rgba(0, 0, 0, 0.5)
  -moz-box-shadow:          0 1px 3px rgba(0, 0, 0, 0.5)
  box-shadow:               0 1px 3px rgba(0, 0, 0, 0.5)
  text-shadow:              0 -1px 1px rgba(0, 0, 0, 0.25)
  background:               #007d9a
  padding:
    left:                   1.5em
    right:                  1.5em
    top:                    0.5em
    bottom:                 0.5em
  color:                    #fff
  font-weight:              bold
  font-size:                12px
  &:hover
    background:             #77bed2
    color:                  white
    text-decoration:        none
  &:active
    top:                    1px
  &.destructive
    background:             #a9014b
    &:hover
      background:           #630030
  &.disabled
    background:             silver
    &:hover
      background:           silver

input[type=submit]
  +button

// make submit button line up with lists of label/input pairs in forms
li > input[type=submit]
  margin-left:              21%

input[type=button]
  +button

form.button_to
  display: inline
  div
    display: inline

// links which look like buttons
.links
  margin:
    top:                    2.5em
    bottom:                 2.5em
  a
    +button

// make buttons look smaller when they are in table cells
=small-button
  -webkit-border-radius:    2px
  -moz-border-radius:       2px
  border-radius:            2px
  font-size:                10px
  font-weight:              normal
  padding:                  3px 15px 3px 15px

td.links
  a
    +small-button
  form input
    +small-button

// products
// NOTE: could potentially split this off into a separate CSS file
.product
  clear: both
  .icon img
    float: left
    margin: 1em

.prev_next
  margin-top: -1em
  text-align: right

// comments (issue tracker, forums)
.comments
  th
    padding: 1em
    vertical-align: top
    background: white
  th + td
    padding-top: -0.5em
    border-bottom: 1px solid #ccc
    width: 85%
  // we want private comments to stand out a bit so that the admin knows which ones are hidden from public view
  tr.private>th
    background: url(../images/lock.png) no-repeat right bottom
.comments .odd
  th + td
    border: 1px solid #ccc
    background: #f7f7f7
.comments .even
  th + td
    border: 1px solid #ccc
    background: #eaeaea

// live previews
#preview_link
  img
    padding-left: 0.33em
    margin-bottom: -0.1em
  #preview_spinner
    display: none
