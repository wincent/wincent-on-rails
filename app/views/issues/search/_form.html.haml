-# NOTE: this adds a few hundred bytes and a db query to each page load, may consider loading this via Ajax
%h2.major Search
%span.annotation all fields are optional

-# use `enforce_utf8: false` to keep ugly utf8 query param out of GET URL
-# use `honey_pot: false` to keep our anti-spam `website_address` query param out of GET URL
= form_for @issue, class: '', enforce_utf8: false, honey_pot: false, method: 'get', url: search_issues_path do |f|

  = f.select :product_id,
    option_groups_from_collection_for_select(Product.categorized, :last, :first, :id, :name, (@issue.product.try(:id))),
    include_blank: true

  = f.select :kind, underscores_to_spaces(Issue::KIND).sort, include_blank: true

  = f.select :status, underscores_to_spaces(Issue::STATUS).sort, include_blank: true

  = f.text_field :summary, label: 'Search for', required: false

  -# nil name to suppress commit=Search appearing in GET URL
  = f.submit 'Search', name: nil
