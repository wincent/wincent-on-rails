<!DOCTYPE html>
<html lang='en-US'>
<head>
<meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
<title>
Ubuntu Command-T is installed but crashes VIM every time I try to envoke it

&middot; wincent.com
</title>
<link href='/assets/application-dfd4c4823a8b2979d87ab2ce01a9114c.css' media='screen' rel='stylesheet' type='text/css'>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35574060-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<nav class='global'>
<h1>
<a href='/'>Wincent</a>
</h1>
</nav>
<div id='content-wrapper'>
<div id='content'>
<div id="breadcrumbs"><a href="/">Home</a> &raquo; <a href="/forums">Forums</a> &raquo; <a href="/forums/command-t">Command-T</a> &raquo; Ubuntu Command-T is installed but crashes VIM every time I try to envoke it</div>
<h1 class='major'>Ubuntu Command-T is installed but crashes VIM every time I try to envoke it</h1>
<div class='topic' id='topic_499'>
<ol class='boxed' id='comments'>
<li class='comment'>
<cite>
anonymous
<span class='when'>
<a href="/forums/command-t/topics/499"><time data-relative="true">2011-12-24T02:14:00Z</time></a>
</span>
</cite>
<blockquote><p>So I have followed this:</p>
<p><a href="https://github.com/skwp/dotfiles" class="external">https://github.com/skwp/dotfiles</a></p>
<p>I have .rbenv managing my rubies - but the default ruby 1.8 is still installed. </p>
<p>I have the default vim installed.</p>
<pre>&#x279c;  command-t  sudo ruby extconf.rb 
checking for ruby.h... yes
creating Makefile
&#x279c;  command-t  sudo make           
gcc -shared -o ext.so ext.o match.o matcher.o -L. -L/usr/lib -L. -Wl,-Bsymbolic-functions -rdynamic -Wl,-export-dynamic    -lruby1.8  -lpthread -lrt -ldl -lcrypt -lm   -lc
&#x279c;  command-t  sudo make install
/usr/bin/install -c -m 0755 ext.so /usr/local/lib/site_ruby/1.8/i686-linux</pre>
<p>Seems to compile ok.</p>
<p>BUT every time I attempt to activate the command-t function, vim closes with a message:</p>
<pre>gvim: symbol lookup error: /home/keith/.vim/bundle/wincent-Command-T/ruby/command-t/ext.so: undefined symbol: rb_intern2</pre>
<p>AND leaves a file called: yankring_history_v2.txt in ~</p>
</blockquote>
</li>
<li class='comment admin' id='comment_7346'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_7346"><time data-relative="true">2011-12-24T08:11:41Z</time></a></span>
</cite>
<blockquote><p>Looks to be miscompiled. Rather than repeating myself, I'll just refer you to my comments on <a href="/forums/command-t/topics/494">this forum topic</a>.</p>
<p>The <code>yanking_history_v2.txt</code> file is unrelated to <a href="/wiki/Command-T">Command-T</a>. Most likely some other plug-in is not cleaning up after itself when <a href="/wiki/Vim">Vim</a> crashes.</p>
</blockquote>
</li>
<li class='comment' id='comment_7377'>
<cite>
<a href="/users/globalkeith">globalkeith</a>
<span class='when'><a href="#comment_7377"><time data-relative="true">2012-01-15T20:00:42Z</time></a></span>
</cite>
<blockquote><p>Thanks! I've had a look at the thread you suggest but beyond describing what the problem is, do you have any suggestions how I can resolve it and get this working on my machine? </p>
</blockquote>
</li>
<li class='comment' id='comment_7378'>
<cite>
<a href="/users/globalkeith">globalkeith</a>
<span class='when'><a href="#comment_7378"><time data-relative="true">2012-01-15T22:35:39Z</time></a></span>
</cite>
<blockquote><p>Ok, so I have tried installing a fresh version of Mint 12 (Ubuntu), with a freshly compiled version of vim, straight from <a href="https://vim.googlecode.com/hg/" class="external">https://vim.googlecode.com/hg/</a> with ruby support (with a brand new install of ruby 1.9.2p290 using rbenv/ruby-build), and I'm still getting the same problem. </p>
<p>Could you explain how I can debug this, to uncover what/where the problem is?</p>
</blockquote>
</li>
<li class='comment admin' id='comment_7379'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_7379"><time data-relative="true">2012-01-16T04:43:56Z</time></a></span>
</cite>
<blockquote><p>Nothing beyond the usual advice to make sure you build Command-T using the same version of Ruby that your copy of Vim was linked against at build time.</p>
<p>If you want further tips, I suggest you post a full transcript showing the steps you took to build both Command-T and Vim. I might be able to spot a mistake.</p>
</blockquote>
</li>

</ol>
</div>
<h2 class='major'>Reply</h2>
<p>This topic is now closed.</p>
<div class='links'>
<a href="/forums/command-t">topic index</a>
</div>

</div>
</div>
<footer class='global'>
<ul>
<li>
<a class='mailto' href='mailto:greg@hurrell.net' title='Email me at greg@hurrell.net'>contact</a>
</li>
<li>
<a href='/misc/legal'>legal</a>
</li>
</ul>
</footer>
</body>
</html>
