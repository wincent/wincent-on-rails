function getCookie(a){for(var c=document.cookie.split("; "),b=0;b<c.length;b++){var d=c[b],e=d.indexOf("="),g=d.substring(0,e);if(g==a)return d.substring(e+1)}return null}function setCookie(a,c,b){a=escape(a)+"="+escape(c||"")+";";if(b){c=new Date;c.setTime(c.getTime()+1000*parseInt(b));a=a+" expires="+c.toGMTString()+";"}a+=" path=/;";return document.cookie=a}function deleteCookie(a){return setCookie(a,null,-86400)}
function setUpLoginLogoutLinks(){var a=getCookie("user_id");a==null||a==""?$("#logout").hide():$("#login").hide()}function insertFlash(a,c){c&&$("#cacheable-flash").append('<div id="'+a+'">'+c+"</div>")}function displayCacheableFlash(){var a=getCookie("flash");if(a){a=unescape(a).replace(/\+/g," ");a=eval("flash = "+a+";");insertFlash("error",a.error);insertFlash("notice",a.notice);deleteCookie("flash")}}
function relativizeDates(){$(".relative-date").each(function(){var a=this.innerHTML,c=new Date;a=new Date(a);var b=c.getTime()-a.getTime();c=new Array("January","February","March","April","May","June","July","August","September","October","November","December");b=Math.round(b/1000);if(b<0)a="in the future";else if(b==0)a="now";else if(b<60)a="a few seconds ago";else if(b<120)a="a minute ago";else if(b<180)a="a couple of minutes ago";else if(b<300)a="a few minutes ago";else if(b<3600)a=Math.round(b/
60)+" minutes ago";else if(b<7200)a="an hour ago";else if(b<86400)a=Math.round(b/3600)+" hours ago";else{b=Math.round(b/86400);if(b==1)a="yesterday";else if(b<=7)a=b+" days ago";else{b=Math.round(b/7);a=b==1?"a week ago":b<=6?b+" weeks ago":a.getDate()+" "+c[a.getMonth()]+" "+a.getFullYear()}}this.title=this.innerHTML;this.innerHTML=a})}
function syntaxHighlight(a,c){if(!c)return a;for(var b="";a!="";){var d=null,e=null;for(var g in c){var f=a.match(c[g]);if(f&&(d&&f.index<d||!d)){d=f.index;f.rule=g;e=f;if(d==0)break}}if(e){d='<span class="'+e.rule+'-syntax">';f="</span>";if(e.rule.match(/^skip-/))f=d="";b=b+a.substring(0,e.index)+d+e[0]+f;a=a.substring(e.index+e[0].length)}else{b+=a;break}}return b}
function stylePreBlocks(){var a={};a["c-syntax"]={preprocessor:/^\s*#.*/m,comment:/\/\/.*|\/\*([^\*]|\*(?!\/))*\*\//,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'([^'\\]|\\.)?')/,keyword:/\b(_Bool|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,statement:/\b(break|case|continue|default|do|else|for|goto|if|return|sizeof|static|switch|while)\b/,"boolean":/\b(true|false)\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+|\d+(\.\d+f?)?)\b/};a["objc-syntax"]=$.extend({},a["c-syntax"],{keyword:/\b(_Bool|BOOL|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,
"boolean":/\b(YES|NO|true|false)\b/});a["ruby-syntax"]={"skip-anchor":/<a .+?a>/,"skip-entities":/&\w+;/,comment:/#.*/,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'(<a .+?a>|[^'\\]|\\.)*')/,keyword:/\b(begin|break|catch|class|continue|def|else|end|for|if|include|load|module|raise|redo|require|rescue|retry|then|throw|unless|until|while|yield)\b/,statement:/\b(private|protected|public)\b/,"boolean":/\b(true|false)\b/,constant:/\b[A-Z][a-zA-Z0-9_]*\b/,namespace:/::/,identifier:/(\$|@{1,2})[a-z_][a-zA-Z0-9_]*\b/,
symbol:/:[a-zA-Z_][a-zA-Z0-9_]*\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+(_[a-fA-F0-9]+)*|0[bB][0-1]+(_[0-1]+)*|[0-9]+(_[0-9]+)*(\.[0-9]+(_[0-9]+)*)?)\b/};a["shell-syntax"]={output:/^[^#\$\n].*/m,constant:/(\\\n|.)+/m};$("pre[class$='syntax']").each(function(){var c=syntaxHighlight(this.innerHTML,a[$(this).attr("class")]),b='<span class="line-number"></span>';c=c.split("\n");this.innerHTML=b+c.join("\n"+b)})}
function setUpSearchLink(){$("#search-link").click(function(){$("#search_box").toggle().focus();return false})}$(document).ready(function(){setUpLoginLogoutLinks();setUpSearchLink();displayCacheableFlash();relativizeDates();stylePreBlocks()});
