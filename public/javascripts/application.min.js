(function(){var i=function(b){for(var a=document.cookie.split("; "),c=0;c<a.length;c++){var e=a[c],d=e.indexOf("=");if(e.substring(0,d)===b)return e.substring(d+1)}return null},k=function(){var b=i("user_id");b===null||b===""?$("#logout").remove():$("#login").remove()},j=function(b,a){a&&$("#cacheable-flash").append($("<div/>",{"class":b,html:a}))},l=function(){var b=i("flash");if(b){b=unescape(b).replace(/\+/g," ");b=eval("flash = "+b+";");j("error",b.error);j("notice",b.notice);b=escape("flash")+
"="+escape("")+";";var a=new Date;a.setTime(a.getTime()+1E3*parseInt(-86400));b=b+" expires="+a.toGMTString()+";";b+=" path=/;";document.cookie=b}};$.fn.relativizeDates=function(){this.find(".relative-date").removeClass("relative-date").addClass("relativized-date").each(function(){var b=this.innerHTML,a=new Date,c;c=(c=b.match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) UTC/))?new Date(Date.UTC(parseInt(c[1]),parseInt(c[2],10)-1,parseInt(c[3],10),parseInt(c[4],10),parseInt(c[5],10),parseInt(c[6],
10))):new Date;a=a.getTime()-c.getTime();a=Math.round(a/1E3);a<0?b="in the future":a===0?b="now":a<60?b="a few seconds ago":a<120?b="a minute ago":a<180?b="a couple of minutes ago":a<300?b="a few minutes ago":a<3600?b=Math.round(a/60)+" minutes ago":a<7200?b="an hour ago":a<86400?b=Math.round(a/3600)+" hours ago":(a=Math.round(a/86400),a===1?b="yesterday":a<=7?b=a+" days ago":(a=Math.round(a/7),b=a===1?"a week ago":a<=6?a+" weeks ago":c.toLocaleDateString()));this.title=c.toLocaleString();this.innerHTML=
b});return this};$.fn.syntaxHighlight=function(){var b={};b["c-syntax"]={preprocessor:/^\s*#.*/m,comment:/\/\/.*|\/\*([^\*]|\*(?!\/))*\*\//,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'([^'\\]|\\.)?')/,keyword:/\b(_Bool|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,statement:/\b(break|case|continue|default|do|else|for|goto|if|return|sizeof|static|switch|while)\b/,"boolean":/\b(true|false)\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+|\d+(\.\d+f?)?)\b/};b["diff-syntax"]={"skip-header":/^(---|\+\+\+) .*/m,
deleted:/^-.*/m,added:/^\+.*/m,"hunk-header":/^@@ -\d+(,\d+) \+\d+(,\d+) @@.*/m};b["objc-syntax"]=$.extend({},b["c-syntax"],{keyword:/\b(_Bool|BOOL|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,"boolean":/\b(YES|NO|true|false)\b/});b["ruby-syntax"]={"skip-anchor":/<a .+?a>/,"skip-entities":/&\w+;/,comment:/#.*/,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'(<a .+?a>|[^'\\]|\\.)*')/,keyword:/\b(begin|break|catch|class|continue|def|else|end|for|if|include|load|module|raise|redo|require|rescue|retry|then|throw|unless|until|while|yield)\b/,
statement:/\b(private|protected|public)\b/,"boolean":/\b(true|false)\b/,constant:/\b[A-Z][a-zA-Z0-9_]*\b/,namespace:/::/,identifier:/(\$|@{1,2})[a-z_][a-zA-Z0-9_]*\b/,symbol:/:[a-zA-Z_][a-zA-Z0-9_]*\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+(_[a-fA-F0-9]+)*|0[bB][0-1]+(_[0-1]+)*|[0-9]+(_[0-9]+)*(\.[0-9]+(_[0-9]+)*)?)\b/};b["shell-syntax"]={output:/^[^#\$\n].*/m,constant:/(\\\n|.)+/m};this.find("pre[class$=syntax][class!=highlighted]").each(function(){var a;a=this.innerHTML;var c=b[$(this).attr("class")];
if(c){for(var e="";a!=="";){var d=null,f=null,h;for(h in c){var g=a.match(c[h]);if(g&&(d&&g.index<d||!d))if(d=g.index,g.rule=h,f=g,d===0)break}if(f)d='<span class="'+f.rule+'-syntax">',g="</span>",f.rule.match(/^skip-/)&&(g=d=""),e=e+a.substring(0,f.index)+d+f[0]+g,a=a.substring(f.index+f[0].length);else{e+=a;break}}a=e}this.innerHTML='<span class="line-number"></span>'+a.split("\n").join('\n<span class="line-number"></span>');$(this).addClass("highlighted")});return this};var m=function(){$("#search-link").click(function(){$("#search_box").toggle().focus();
return!1})},n=function(){var b=window.location.hash;b.length>=2&&$(b).addClass("active-fragment")};$(document).ready(function(){k();m();l();n();$("body").syntaxHighlight().relativizeDates();$("input[data-confirm]").live("click",function(){return confirm($(this).attr("data-confirm"))});$("form[data-remote]").live("submit",function(b){var a=$(this),c=a.find("input[type=submit]");if(c.hasClass("disabled"))return!1;c.addClass("disabled");$.ajax({url:a.attr("action")+".js",type:"post",data:a.serialize(),
error:function(){alert("Form submission failed")},complete:function(){c.removeClass("disabled")}});b.preventDefault()});$("a[data-popup]").live("click",function(){window.open(this.href,null,$(this).attr("data-popup"));return!1})})})();
