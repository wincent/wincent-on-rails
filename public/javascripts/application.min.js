function getCookie(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var g=b[c],h=g.indexOf("=");if(g.substring(0,h)==a)return g.substring(h+1)}return null}function setCookie(a,b,c){a=escape(a)+"="+escape(b||"")+";";if(c){b=new Date;b.setTime(b.getTime()+1E3*parseInt(c));a=a+" expires="+b.toGMTString()+";"}a+=" path=/;";return document.cookie=a}function deleteCookie(a){return setCookie(a,null,-86400)}
function setUpLoginLogoutLinks(){var a=getCookie("user_id");a==null||a==""?$("#logout").remove():$("#login").remove()}function insertFlash(a,b){b&&$("#cacheable-flash").append($("<div/>",{"class":a,html:b}))}function displayCacheableFlash(){var a=getCookie("flash");if(a){a=unescape(a).replace(/\+/g," ");a=eval("flash = "+a+";");insertFlash("error",a.error);insertFlash("notice",a.notice);deleteCookie("flash")}}
function dateFromUTCString(a){return(a=a.match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}) UTC/))?new Date(Date.UTC(parseInt(a[1]),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),parseInt(a[6],10))):new Date}
function relativizeDates(){$(".relative-date").each(function(){var a=this.innerHTML,b=new Date,c=dateFromUTCString(a);a=b.getTime()-c.getTime();a=Math.round(a/1E3);if(a<0)a="in the future";else if(a==0)a="now";else if(a<60)a="a few seconds ago";else if(a<120)a="a minute ago";else if(a<180)a="a couple of minutes ago";else if(a<300)a="a few minutes ago";else if(a<3600)a=Math.round(a/60)+" minutes ago";else if(a<7200)a="an hour ago";else if(a<86400)a=Math.round(a/3600)+" hours ago";else{a=Math.round(a/
86400);if(a==1)a="yesterday";else if(a<=7)a=a+" days ago";else{a=Math.round(a/7);a=a==1?"a week ago":a<=6?a+" weeks ago":c.toLocaleDateString()}}this.title=c.toLocaleString();this.innerHTML=a})}
$.fn.syntaxHighlight=function(){function a(c,g){if(!g)return c;for(var h="";c!="";){var d=null,e=null;for(var i in g){var f=c.match(g[i]);if(f&&(d&&f.index<d||!d)){d=f.index;f.rule=i;e=f;if(d==0)break}}if(e){d='<span class="'+e.rule+'-syntax">';f="</span>";if(e.rule.match(/^skip-/))f=d="";h=h+c.substring(0,e.index)+d+e[0]+f;c=c.substring(e.index+e[0].length)}else{h+=c;break}}return h}var b={};b["c-syntax"]={preprocessor:/^\s*#.*/m,comment:/\/\/.*|\/\*([^\*]|\*(?!\/))*\*\//,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'([^'\\]|\\.)?')/,
keyword:/\b(_Bool|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,statement:/\b(break|case|continue|default|do|else|for|goto|if|return|sizeof|static|switch|while)\b/,"boolean":/\b(true|false)\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+|\d+(\.\d+f?)?)\b/};b["objc-syntax"]=$.extend({},b["c-syntax"],{keyword:/\b(_Bool|BOOL|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,"boolean":/\b(YES|NO|true|false)\b/});b["ruby-syntax"]={"skip-anchor":/<a .+?a>/,"skip-entities":/&\w+;/,
comment:/#.*/,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'(<a .+?a>|[^'\\]|\\.)*')/,keyword:/\b(begin|break|catch|class|continue|def|else|end|for|if|include|load|module|raise|redo|require|rescue|retry|then|throw|unless|until|while|yield)\b/,statement:/\b(private|protected|public)\b/,"boolean":/\b(true|false)\b/,constant:/\b[A-Z][a-zA-Z0-9_]*\b/,namespace:/::/,identifier:/(\$|@{1,2})[a-z_][a-zA-Z0-9_]*\b/,symbol:/:[a-zA-Z_][a-zA-Z0-9_]*\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+(_[a-fA-F0-9]+)*|0[bB][0-1]+(_[0-1]+)*|[0-9]+(_[0-9]+)*(\.[0-9]+(_[0-9]+)*)?)\b/};
b["shell-syntax"]={output:/^[^#\$\n].*/m,constant:/(\\\n|.)+/m};this.find("pre[class$=syntax][class!=highlighted]").each(function(){$(this).addClass("highlighted");this.innerHTML='<span class="line-number"></span>'+a(this.innerHTML,b[$(this).attr("class")]).split("\n").join('\n<span class="line-number"></span>')});return this};function setUpSearchLink(){$("#search-link").click(function(){$("#search_box").toggle().focus();return false})}
$(document).ready(function(){setUpLoginLogoutLinks();setUpSearchLink();displayCacheableFlash();relativizeDates();$("body").syntaxHighlight();$("a[data-confirm],input[data-confirm]").live("click",function(){return confirm($(this).attr("data-confirm"))});$("a[data-popup]").live("click",function(){window.open(this.href,null,$(this).attr("data-popup"));return false})});
