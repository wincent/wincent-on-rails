function getCookie(a){var d=document.cookie.split("; ");for(var b=0;b<d.length;b++){var g=d[b];var f=g.indexOf("=");var e=g.substring(0,f);if(e==a){return g.substring(f+1)}}return null}function setCookie(a,e,b){var c=escape(a)+"="+escape(e||"")+";";if(b){var f=new Date();f.setTime(f.getTime()+(1000*parseInt(b)));c=c+" expires="+f.toGMTString()+";"}c=c+" path=/;";return document.cookie=c}function deleteCookie(a){return setCookie(a,null,-86400)}function setUpLoginLogoutLinks(){var a=getCookie("user_id");if(a==null||a==""){$("#logout").hide()}else{$("#login").hide()}}function insertFlash(a,b){if(b){$("#cacheable-flash").append('<div id="'+a+'">'+b+"</div>")}}function displayCacheableFlash(){var flash=getCookie("flash");if(flash){flash=unescape(flash).replace(/\+/g," ");flash=eval("flash = "+flash+";");insertFlash("error",flash.error);insertFlash("notice",flash.notice);deleteCookie("flash")}}function relativizeDates(){$(".relative-date").each(function(e){var j=this.innerHTML;var b=new Date;var d=new Date(j);var f=b.getTime()-d.getTime();var c=new Array("January","February","March","April","May","June","July","August","September","October","November","December");var g=Math.round((f/1000));if(g<0){j="in the future"}else{if(g==0){j="now"}else{if(g<60){j="a few seconds ago"}else{if(g<120){j="a minute ago"}else{if(g<180){j="a couple of minutes ago"}else{if(g<300){j="a few minutes ago"}else{if(g<3600){j=Math.round(g/60)+" minutes ago"}else{if(g<7200){j="an hour ago"}else{if(g<86400){j=Math.round(g/3600)+" hours ago"}else{var h=Math.round(g/86400);if(h==1){j="yesterday"}else{if(h<=7){j=h+" days ago"}else{var a=Math.round(h/7);if(a==1){j="a week ago"}else{if(a<=6){j=a+" weeks ago"}else{j=d.getDate()+" "+c[d.getMonth()]+" "+d.getFullYear()}}}}}}}}}}}}}this.title=this.innerHTML;this.innerHTML=j})}function syntaxHighlight(h,i){if(!i){return h}var c="";while(h!=""){var b=null;var g=null;for(var f in i){var d=h.match(i[f]);if(d&&((b&&d.index<b)||!b)){b=d.index;d.rule=f;g=d;if(b==0){break}}}if(g){var a='<span class="'+g.rule+'-syntax">';var e="</span>";if(g.rule.match(/^skip-/)){a="";e=""}c=c+h.substring(0,g.index)+a+g[0]+e;h=h.substring(g.index+g[0].length)}else{c=c+h;break}}return c}function stylePreBlocks(){var a={};a["c-syntax"]={preprocessor:/^\s*#.*/m,comment:/\/\/.*|\/\*([^\*]|\*(?!\/))*\*\//,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'([^'\\]|\\.)?')/,keyword:/\b(_Bool|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,statement:/\b(break|case|continue|default|do|else|for|goto|if|return|sizeof|static|switch|while)\b/,"boolean":/\b(true|false)\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+|\d+(\.\d+f?)?)\b/};a["objc-syntax"]=$.extend({},a["c-syntax"],{keyword:/\b(_Bool|BOOL|bool|char|const|int|long|short|struct|typedef|unsigned|void)\b/,"boolean":/\b(YES|NO|true|false)\b/});a["ruby-syntax"]={"skip-anchor":/<a .+?a>/,"skip-entities":/&\w+;/,comment:/#.*/,"string-literal":/("(<a .+?a>|[^"\\]|\\.)*"|'(<a .+?a>|[^'\\]|\\.)*')/,keyword:/\b(begin|break|catch|class|continue|def|else|end|for|if|include|load|module|raise|redo|require|rescue|retry|then|throw|unless|until|while|yield)\b/,statement:/\b(private|protected|public)\b/,"boolean":/\b(true|false)\b/,constant:/\b[A-Z][a-zA-Z0-9_]*\b/,namespace:/::/,identifier:/(\$|@{1,2})[a-z_][a-zA-Z0-9_]*\b/,symbol:/:[a-zA-Z_][a-zA-Z0-9_]*\b/,"numeric-literal":/\b(0[xX][a-fA-F0-9]+(_[a-fA-F0-9]+)*|0[bB][0-1]+(_[0-1]+)*|[0-9]+(_[0-9]+)*(\.[0-9]+(_[0-9]+)*)?)\b/};a["shell-syntax"]={output:/^[^#\$\n].*/m,constant:/(\\\n|.)+/m};$("pre[class$='syntax']").each(function(c){var e=syntaxHighlight(this.innerHTML,a[$(this).attr("class")]);var d='<span class="line-number"></span>';var b=e.split("\n");this.innerHTML=d+b.join("\n"+d)})}function setUpSearchLink(){$("#search-link").click(function(){$("#search_box").toggle().focus();return false})}$(document).ready(function(){setUpLoginLogoutLinks();setUpSearchLink();displayCacheableFlash();relativizeDates();stylePreBlocks()});