<!DOCTYPE html>
<html lang='en-US'>
<head>
<meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
<meta content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no' name='viewport'>
<title>
Bug #2133: Evaluation of PROCESSOR_COUNT during build time is wrong
&middot; wincent.com
</title>
<link rel="stylesheet" media="screen" href="https://djfaa0bz60cz6.cloudfront.net/assets/application-73fd7b8197d0b27a25f03f916460e23c.css" />
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35574060-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
<div class='viewport menu-closed'>
<div class='app'>
<a id="top" name="top"></a>
<nav class='global'>
<a class='menu-icon' href='#'>&equiv;</a>
<h1><a href="/">Wincent</a></h1>
<ul class='navbar-links'>
<li>
<a href="/products">Products</a>
</li>
<li><a href="/blog">Blog</a></li>
<li><a href="/wiki">Wiki</a></li>
<li class='selected'><a href="/issues">Issues</a></li>
</ul>
</nav>
<div id='content-wrapper'>
<div id='content'>
<div class='notice'>
<i class='fa fa-info-circle'></i>
You are viewing an historical archive of past issues. Please report new issues to the appropriate project issue tracker on <a href="https://github.com/wincent?tab=repositories">GitHub</a>.
</div>
<div id="breadcrumbs"><a href="/">Home</a> &raquo; <a href="/issues">Issues</a> &raquo; Bug #2133</div>
<div class='issue' id='issue_2133'>
<form class="edit_issue" id="edit_issue_2133" action="/issues/2133" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="tNqNFhnyLpsfyHyuuPPO58jidaeLz/voL/eMpuuSX+KAKDOhvn/0zsZET1mJ2p1TfWAcm4AjdfQP6FlYz0o4xg==" /><input type="text" name="website_address" id="website_address" value="" class="website-address" /><h1 class='bug major'>
Bug #2133:
<span data-name='issue[summary]'>
Evaluation of PROCESSOR_COUNT during build time is wrong
</span>
</h1>
<table class='issue-metadata'>
<tr>
<th>Kind</th>
<td>
bug
</td>
</tr>
<tr>
<th>Product</th>
<td>
Command-T
</td>
</tr>
<tr>
<th>When</th>
<td>Created <time data-relative="true">2013-12-19T13:53:13Z</time>, updated <time data-relative="true">2014-01-03T09:37:53Z</time></td>
</tr>
<tr>
<th>Status</th>
<td>
closed
</td>
</tr>
<tr>
<th>Reporter</th>
<td><a href="/users/vit-ondruch">Vit Ondruch</a></td>
</tr>
<tr>
<th>Tags</th>
<td data-name='issue[pending_tags]'>
no tags
</td>
</tr>
</table>
<h4 class='major'>
Description
</h4>
<div class='issue-description-body'>
<p>You assume, that the Ruby extension is build on the same machine, where the code is executed. This assumption is invalid for Fedora. When I package command-t for use with Fedora, the extension is built on Koji builder. There might be powerful CPUs with plenty of cores, but it says nothing about my machine. Could you please consider to update this logic somehow?</p>

</div>
</form></div>
<h4 class='major'>Comments</h4>
<ol class='boxed' id='comments'>
<li class='comment admin' id='comment_10789'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10789"><time data-relative="true">2013-12-19T14:23:53Z</time></a></span>
</cite>
<blockquote><p>My concern is that the logic is complicated, brittle, and potentially expensive, so I preferred to reduce the exposure by running it only once, at build time, rather than at run time.</p>
<p>But I see your point. I'll see what I can do.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_10792'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10792"><time data-relative="true">2013-12-19T16:01:33Z</time></a></span>
</cite>
<blockquote><p>I am thinking of applying something like <a href="/snippets/169">this patch</a>.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_10801'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10801"><time data-relative="true">2013-12-23T04:49:54Z</time></a></span>
</cite>
<blockquote><p>I decided to run with the patch, and have released 1.6.1.</p>
<p>Marking this ticket as closed.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_10802'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10802"><time data-relative="true">2013-12-23T04:49:57Z</time></a></span>
</cite>
<blockquote><p><strong>Status</strong> changed:</p>
<ul>
<li><strong>From:</strong> new</li>
<li><strong>To:</strong> closed</li>
</ul>
</blockquote>
</li>
<li class='comment' id='comment_10819'>
<cite>
<a href="/users/vit-ondruch">Vit Ondruch</a>
<span class='when'><a href="#comment_10819"><time data-relative="true">2014-01-03T09:37:53Z</time></a></span>
</cite>
<blockquote><p>Thank you. I have not a chance to test the change yet, but it looks reasonable.</p>
</blockquote>
</li>

</ol>
<h5 class='major'>Add a comment</h5>
<p>Comments are now closed for this issue.</p>

</div>
</div>
<footer class='global'>
<ul>
<li><a title="Email me at greg@hurrell.net" class="mailto" href="mailto:greg@hurrell.net">contact</a></li>
<li><a href="/misc/legal">legal</a></li>
</ul>
</footer>
</div>
<div class='menu hide'>
<div class='menu-inner'>
<section>
<h2>Menu</h2>
<ul>
<li><a href="/blog">Blog</a></li>
<li><a href="/wiki">Wiki</a></li>
<li><a href="/issues">Issues</a></li>
<li><a href="/snippets">Snippets</a></li>
</ul>
</section>
</div>
</div>
</div>
<script src="https://djfaa0bz60cz6.cloudfront.net/assets/application-70afe6376892ea318388e4bbb986d5a1.js"></script>

<script>
  new Wincent.Menu();
</script>
</body>
</html>
