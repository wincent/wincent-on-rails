<!DOCTYPE html>
<html lang='en-US'>
<head>
<meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
<meta content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no' name='viewport'>
<title>
Bug #566: Synergy gets sometimes the wrong cover from the CD album name
&middot; wincent.com
</title>
<link rel="stylesheet" media="screen" href="https://djfaa0bz60cz6.cloudfront.net/assets/application-73fd7b8197d0b27a25f03f916460e23c.css" />
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35574060-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
<div class='viewport menu-closed'>
<div class='app'>
<a id="top" name="top"></a>
<nav class='global'>
<a class='menu-icon' href='#'>&equiv;</a>
<h1><a href="/">Wincent</a></h1>
<ul class='navbar-links'>
<li>
<a href="/products">Products</a>
</li>
<li><a href="/blog">Blog</a></li>
<li><a href="/wiki">Wiki</a></li>
<li class='selected'><a href="/issues">Issues</a></li>
</ul>
</nav>
<div id='content-wrapper'>
<div id='content'>
<div class='notice'>
<i class='fa fa-info-circle'></i>
You are viewing an historical archive of past issues. Please report new issues to the appropriate project issue tracker on <a href="https://github.com/wincent?tab=repositories">GitHub</a>.
</div>
<div id="breadcrumbs"><a href="/">Home</a> &raquo; <a href="/issues">Issues</a> &raquo; Bug #566</div>
<div class='issue' id='issue_566'>
<form class="edit_issue" id="edit_issue_566" action="/issues/566" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="TPObaWMqm66Xy56BNRxGkCMfHEs1CvHKk1WDkyrZ9YZ4ASXexKdB+05HrXYENRUklp11dz7mf9azSlZtDgGSog==" /><input type="text" name="website_address" id="website_address" value="" class="website-address" /><h1 class='bug major'>
Bug #566:
<span data-name='issue[summary]'>
Synergy gets sometimes the wrong cover from the CD album name
</span>
</h1>
<table class='issue-metadata'>
<tr>
<th>Kind</th>
<td>
bug
</td>
</tr>
<tr>
<th>Product</th>
<td>
Synergy Advance
</td>
</tr>
<tr>
<th>When</th>
<td>Created <time data-relative="true">2007-05-05T04:02:27Z</time>, updated <time data-relative="true">2007-05-17T11:50:22Z</time></td>
</tr>
<tr>
<th>Status</th>
<td>
closed
</td>
</tr>
<tr>
<th>Reporter</th>
<td><a href="/users/jj-guillemaud">JJ Guillemaud</a></td>
</tr>
<tr>
<th>Tags</th>
<td data-name='issue[pending_tags]'>
no tags
</td>
</tr>
</table>
<h4 class='major'>
Description
</h4>
<div class='issue-description-body'>
<p>In a number of cases, Synergy 3.1.2 gives covers which don't even correspond to the artist, or correspond to the artist but not to the original album (later compilations/packages instead). Here are examples : Artist-Supertramp,Album-Live'88.jpg Artist-ThePretenders,Album-Pretenders.jpg Artist-TheAlanParsonsProject,Album-Freudiana.jpg Artist-RoxyMusic,Album-Flesh&amp;Blood.jpg Artist-RickieLeeJones,Album-RickieLeeJones.jpg Artist-Queen,Album-TheGame.jpg Artist-Queen,Album-Jazz.jpg Artist-PatBenatar,Album-Tropico.jpg Artist-PatBenatar,Album-SevenTheHardWay.jpg Artist-PatBenatar,Album-LiveFromEarth.jpg Artist-MariahCarey,Album-MariahCarey.jpg Artist-LauraBranigan,Album-LauraBranigan.jpg Artist-LauraBranigan,Album-Branigan.jpg</p>

</div>
</form></div>
<h4 class='major'>Comments</h4>
<ol class='boxed' id='comments'>
<li class='comment' id='comment_2981'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2981"><time data-relative="true">2007-05-05T04:08:12Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=112) Examples of wrong covers got by Synergy 3.1.2</p>
</blockquote>
</li>
<li class='comment' id='comment_2982'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2982"><time data-relative="true">2007-05-05T04:08:45Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=113) Examples of wrong covers got by Synergy 3.1.2</p>
</blockquote>
</li>
<li class='comment' id='comment_2983'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2983"><time data-relative="true">2007-05-05T04:09:02Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=114) Examples of wrong covers got by Synergy 3.1.2</p>
</blockquote>
</li>
<li class='comment' id='comment_2984'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2984"><time data-relative="true">2007-05-05T04:10:10Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=115) Artist-Supertramp,Album-Live'88.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2985'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2985"><time data-relative="true">2007-05-05T04:10:33Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=116) Artist-TheAlanParsonsProject,Album-Freudiana.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2986'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2986"><time data-relative="true">2007-05-05T04:10:56Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=117) Artist-RoxyMusic,Album-Flesh&amp;Blood.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2987'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2987"><time data-relative="true">2007-05-05T04:11:21Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=118) Artist-RickieLeeJones,Album-RickieLeeJones.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2988'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2988"><time data-relative="true">2007-05-05T04:11:53Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=119) Artist-Queen,Album-TheGame.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2989'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2989"><time data-relative="true">2007-05-05T04:12:24Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=120) Artist-Queen,Album-Jazz.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2990'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2990"><time data-relative="true">2007-05-05T04:13:06Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=121) Artist-PatBenatar,Album-Tropico.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2991'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2991"><time data-relative="true">2007-05-05T04:13:36Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=122) Artist-PatBenatar,Album-SevenTheHardWay.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2992'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2992"><time data-relative="true">2007-05-05T04:14:24Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=123) Artist-ThePretenders,Album-Pretenders.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2993'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2993"><time data-relative="true">2007-05-05T04:14:47Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=124) Artist-PatBenatar,Album-LiveFromEarth.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2994'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2994"><time data-relative="true">2007-05-05T04:15:06Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=125) Artist-MariahCarey,Album-MariahCarey.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2995'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2995"><time data-relative="true">2007-05-05T04:15:35Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=126) Artist-LauraBranigan,Album-LauraBranigan.jpg</p>
</blockquote>
</li>
<li class='comment' id='comment_2996'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2996"><time data-relative="true">2007-05-05T04:16:02Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=127) Artist-LauraBranigan,Album-Branigan.jpg</p>
</blockquote>
</li>
<li class='comment admin' id='comment_2997'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_2997"><time data-relative="true">2007-05-05T07:14:08Z</time></a></span>
</cite>
<blockquote><p>Thanks for attaching the example images, JJ.</p>
<p>First, to explain how it *should* work in the case of an album like Queen/Jazz: Synergy first asks iTunes if the art is embedded and if it is not asks Amazon with a search string like &quot;Queen Jazz&quot;. It makes the assumption that the first result returned by Amazon is likely to be correct.</p>
<p>So there are a number of ways this can go wrong:</p>
<p>1. The first result might not be one you want -- perhaps the second or third result is actually a better match -- but Synergy has no way to know this so has to settle for the first one.</p>
<p>2. If your ID3 tags have inaccurate or little information then the wrong album might be returned.</p>
<p>So you should be able to go to Amazon and do a manual search for things strings like &quot;Pat Benatar live from earth&quot; in the &quot;Music&quot; section and see if Amazon returns the right result.</p>
<p>Some of the error examples you've provided could possibly be explained by Amazon returning similar but not-quite-right titles, but some of them are completely out of the park and I am not sure why that might be.</p>
<pre></pre>
<p>Can you do a little test to see if this is reproducible for one of those albums?</p>
<p>As an example:</p>
<p>1. Quit iTunes and Synergy 2. Delete a cover like &quot;Artist-PatBenatar,Album-LiveFromEarth.jpg&quot; 3. Launch iTunes and Synergy 4. Play a track from the Pat Benatar &quot;Live from Earth&quot; album and see if Synergy downloads the wrong track (be aware that the download may not appear immediately because Synergy maintains a queue of covers-to-be-searched-for and only fires them off one at a time after a delay required by Amazon Web Services).</p>
<p>This may just be some kind of temporary issue with Amazon returning the wrong cover. If it downloads the wrong cover again we'll have to dig a bit deeper.</p>
</blockquote>
</li>
<li class='comment' id='comment_2998'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2998"><time data-relative="true">2007-05-06T01:52:59Z</time></a></span>
</cite>
<blockquote><p>(In reply to comment #17)</p>
<blockquote>
<p>Can you do a little test to see if this is reproducible for one of those albums?</p>
<p>As an example:</p>
<p>1. Quit iTunes and Synergy 2. Delete a cover like &quot;Artist-PatBenatar,Album-LiveFromEarth.jpg&quot; 3. Launch iTunes and Synergy 4. Play a track from the Pat Benatar &quot;Live from Earth&quot; album and see if Synergy downloads the wrong track (be aware that the download may not appear immediately because Synergy maintains a queue of covers-to-be-searched-for and only fires them off one at a time after a delay required by Amazon Web Services).</p>
<p>This may just be some kind of temporary issue with Amazon returning the wrong cover. If it downloads the wrong cover again we'll have to dig a bit deeper.</p>
</blockquote>
<p>I did just what you requested, except I used Artist-RoxyMusic,Album-Flesh&amp;Blood.jpg which was even more outrageous (returns Battlestar Galactica Season One). The behavior after deleting the original file from the Album Covers folder, and letting Synergy reload a new one, was exactly the same, with the same Battlestar cover I attached previously. I then went to Amazon.com, used &quot;Roxy Music Flesh&quot; as search string in &quot;Music&quot; and I got correctly the right Roxy Music CDs. Also,all my iTunes songs are MP3 converted from CDs, for which I got the song titles and Album titles thru iTunes, and since iTunes never had a problem getting them (at least for those with the wrong cover), I suppose the ID tag for the Album was right; but may be Synergy does not use this ID tag when accessing Amazon ?</p>
</blockquote>
</li>
<li class='comment' id='comment_2999'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_2999"><time data-relative="true">2007-05-09T00:45:37Z</time></a></span>
</cite>
<blockquote><p>Set the wrong status by error. Thought &quot;WONTFIX&quot; meant fix does not work...</p>
</blockquote>
</li>
<li class='comment admin' id='comment_3000'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_3000"><time data-relative="true">2007-05-13T06:59:36Z</time></a></span>
</cite>
<blockquote><p>Ok, so I've done some more testing. The URLs that Synergy uses to perform the Amazon searches look like this:</p>
<p><a href="http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;dev-t=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Pat%20Benatar%20Live%20From%20Earth" class="external">http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;dev-t=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Pat%20Benatar%20Live%20From%20Earth</a></p>
<p>That's the example of &quot;Pat Benatar&quot;, &quot;Live From Earth&quot;. Note how the words are just mashed together, separated by a single space (which when encoded for the URL appears as &quot;%20&quot;), and tacked onto the end of the URL as the &quot;KeywordSearch&quot; parameter.</p>
<p>So you can actually run the same searches that Synergy runs and compare the results. For example, from the commandline, all on a single line:</p>
<p>curl '<a href="http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;dev-t=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Pat%20Benatar%20Live%20From%20Earth'" class="external">http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;dev-t=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Pat%20Benatar%20Live%20From%20Earth'</a></p>
<p>Synergy will pick the top search result and prefer &quot;ImageUrlLarge&quot; if it is available. In this case Amazon returns:</p>
<p><a href="http://images.amazon.com/images/P/B000008DDD.01.LZZZZZZZ.jpg" class="external">http://images.amazon.com/images/P/B000008DDD.01.LZZZZZZZ.jpg</a></p>
<p>Which, as far as I can tell (seeing I don't have the album) is correct.</p>
<p>Likewise for &quot;Roxy Music&quot;, &quot;Flesh &amp; Blood&quot; the search URL is:</p>
<p><a href="http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;dev-t=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Roxy%20Music%20Flesh%20&amp;%20Blood" class="external">http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;dev-t=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Roxy%20Music%20Flesh%20&amp;%20Blood</a></p>
<p>And the top search result seems to be correct:</p>
<p><a href="http://images.amazon.com/images/P/B0000256VN.01.LZZZZZZZ.jpg" class="external">http://images.amazon.com/images/P/B0000256VN.01.LZZZZZZZ.jpg</a></p>
<p>Note that that search URL actually has a minor bug: note how the &quot;&amp;&quot; character, which has special meaning in URLs, is not escaped but is just passed through literally. I think I should probably filter out such characters. But despite the error, the search result still seems correct.</p>
<p>So the question now is, why is Synergy downloading the wrong thing for you? We can confirm that Synergy is sending the right query, and we can also check that Amazon is returning the right result; finally, we can check that the downloaded data is what we expect it to be (and that no upstream proxy is getting in the way).</p>
<p>You can use the tcpdump tool to monitor network traffic using a line like:</p>
<p>sudo tcpdump -A -s 32768 host xml.amazon.com</p>
<p>You may need to consult the tcpdump man page (man tcpdump) in order to get this working on your system, as the settings are highly network-dependent. Notes on the example line above:</p>
<p>- &quot;sudo&quot; makes the command run with root privileges; without this you'll probably get a &quot;no suitable device found&quot; error</p>
<p>- the &quot;-A&quot; switch tells tcpdump to print output in ASCII so you can see the actual contents of the packets</p>
<p>- &quot;-s&quot; raises the packet dump limit above the default of 68 bytes so that you can see all of the traffic; 1500 is probably enough if you are connecting via ethernet but I've shown a higher value of 32768 just in case your network uses an even larger size</p>
<p>- &quot;host xml.amazon.com&quot; indicates that all traffic to and from xml.amazon.com will be dumped</p>
<p>Now, Synergy maintains these searches in a queue and fires them off periodically. So the way to capture the output of exactly one query is to quit Synergy, prepare iTunes to play the track you want to test, and then start Synergy. Now start tcpdump and *then* switch to the track you want to test. In this way Synergy will fire off the query immediately because there is guaranteed to be nothing ahead of it in the queue.</p>
<p>The output from tcpdump should show both the query sent to Amazon, and the data returned. In this way we can confirm that Synergy is sending the right query, and Amazon is sending the right response.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_3001'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_3001"><time data-relative="true">2007-05-14T09:24:09Z</time></a></span>
</cite>
<blockquote><p>(In reply to comment #20)</p>
<blockquote>
<p>Note that that search URL actually has a minor bug: note how the &quot;&amp;&quot; character, which has special meaning in URLs, is not escaped but is just passed through literally. I think I should probably filter out such characters. But despite the error, the search result still seems correct.</p>
</blockquote>
<p>I've just fixed the encoding issue (<a href="http://wincent.com/a/about/wincent/weblog/svn-log/archives/2007/05/synergy_r356_1_item_changed.php" class="external">http://wincent.com/a/about/wincent/weblog/svn-log/archives/2007/05/synergy_r356_1_item_changed.php</a>).</p>
</blockquote>
</li>
<li class='comment' id='comment_3002'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_3002"><time data-relative="true">2007-05-17T11:15:02Z</time></a></span>
</cite>
<blockquote><p>Created an attachment (id=130) tcpdump log</p>
</blockquote>
</li>
<li class='comment' id='comment_3003'>
<cite>
<a href="/users/jj-guillemaud">JJ Guillemaud</a>
<span class='when'><a href="#comment_3003"><time data-relative="true">2007-05-17T11:18:03Z</time></a></span>
</cite>
<blockquote><p>(In reply to comment #22)</p>
<blockquote>
<p>Created an attachment (id=130) [details] tcpdump log</p>
</blockquote>
<p>I used tcpdump as required, and searched for Roxy Music Flesh &amp; Blood. The tcpdump log is attached above</p>
<p>Hope this helps</p>
</blockquote>
</li>
<li class='comment admin' id='comment_3004'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_3004"><time data-relative="true">2007-05-17T11:50:22Z</time></a></span>
</cite>
<blockquote><p>Thanks a lot for capturing the output, JJ. It is very informative... here we can see that Synergy is sending the right request string:</p>
<p>GET /onca/xml2?t=synerformacos-20&amp;devt=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Flesh%20&amp;%20Blood%20Roxy%20Music</p>
<p>It has the bug I mentioned earlier in comment #20 that the &quot;&amp;&quot; between &quot;Flesh&quot; and &quot;Blood&quot; is not correctly escaped, but that shouldn't make any difference as the search string is still close enough to produce the right result. You can upgrade to 3.1.3b (now on the servers) which addresses that issue, if you want, but it shouldn't really make much of a difference.</p>
<p>Especially interesting in the output is the confirmation that Amazon is &quot;Battlestar Galactica: Season One&quot; as the top result, with the corresponding art:</p>
<p><a href="http://ec1.images-amazon.com/images/I/61NCPTQFNVL.jpg" class="external">http://ec1.images-amazon.com/images/I/61NCPTQFNVL.jpg</a></p>
<p>So I tested the same URL from here using curl, all of this should be on one line, although Bugzilla will most likely wrap it onto multiple lines:</p>
<p>curl '<a href="http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;devt=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Flesh%20&amp;%20Blood%20Roxy%20Music'" class="external">http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;devt=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Flesh%20&amp;%20Blood%20Roxy%20Music'</a></p>
<p>And Amazon returns the wrong result! Just to rule out all possible causes of error, I substitute the &quot;&amp;&quot; between &quot;Flesh&quot; and &quot;Blood&quot; with the encoded form, &quot;%26&quot; as shown below:</p>
<p>curl '<a href="http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;devt=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Flesh%20%26%20Blood%20Roxy%20Music'" class="external">http://xml.amazon.com/onca/xml2?t=synerformacos-20&amp;devt=D31GYSP62C9C55&amp;type=lite&amp;mode=music&amp;page=1&amp;f=xml&amp;KeywordSearch=Flesh%20%26%20Blood%20Roxy%20Music'</a></p>
<p>This is the way it should be escaped, and the way Synergy version 3.1.3b escapes it. Again Amazon returns the wrong result.</p>
<p>So at least in the case of that album, it looks like this is Amazon bug. I can go to their website, select &quot;Music&quot; from the pop-up, and enter &quot;Flesh &amp; Blood Roxy Music&quot; as a search string, and it will give me the correct art. But providing a correct search URL to their XML interface gives the wrong art. And we've confirmed that Synergy is indeed supplying a correct search URL.</p>
<p>In a case like this where Amazon is returning the wrong art the only way to override it is to obtain the correct art manually and overwrite the wrong art using one of the following means:</p>
<p>1. Overwriting the downloaded file (the one with the wrong art in it)</p>
<p>2. Manually add the correct art to iTunes, then delete the wrongly downloaded file; the next time you play the track Synergy will pick up the correct art from iTunes</p>
<p>I do plan to develop a UI that users can use to make managing album art easier (things like overriding bad search results etc). For example, see feature <a href="/issues/102">request #102</a> (&quot;Hot key to cycle through Amazon search results&quot;); there may be others already in the database too.</p>
<p>We can look at the other albums on your list, but I suspect the results will be the same. So for now I am going to mark this as WORKSFORME.</p>
</blockquote>
</li>

</ol>
<h5 class='major'>Add a comment</h5>
<p>Comments are now closed for this issue.</p>

</div>
</div>
<footer class='global'>
<ul>
<li><a title="Email me at greg@hurrell.net" class="mailto" href="mailto:greg@hurrell.net">contact</a></li>
<li><a href="/misc/legal">legal</a></li>
</ul>
</footer>
</div>
<div class='menu hide'>
<div class='menu-inner'>
<section>
<h2>Menu</h2>
<ul>
<li><a href="/blog">Blog</a></li>
<li><a href="/wiki">Wiki</a></li>
<li><a href="/issues">Issues</a></li>
<li><a href="/snippets">Snippets</a></li>
</ul>
</section>
</div>
</div>
</div>
<script src="https://djfaa0bz60cz6.cloudfront.net/assets/application-70afe6376892ea318388e4bbb986d5a1.js"></script>

<script>
  new Wincent.Menu();
</script>
</body>
</html>
